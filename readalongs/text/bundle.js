/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */

/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
(() => { var e = { 437: (e, t, n) => { "use strict";
                    n.d(t, { b: () => K, g: () => U, h: () => w, p: () => u, r: () => te }); let r, o, i = !1; const s = "undefined" != typeof window ? window : {},
                        a = s.document || { head: {} },
                        l = { $flags$: 0, $resourcesUrl$: "", jmp: e => e(), raf: e => requestAnimationFrame(e), ael: (e, t, n, r) => e.addEventListener(t, n, r), rel: (e, t, n, r) => e.removeEventListener(t, n, r), ce: (e, t) => new CustomEvent(e, t) },
                        u = e => Promise.resolve(e),
                        c = (() => { try { return new CSSStyleSheet, "function" == typeof(new CSSStyleSheet).replace } catch (e) {} return !1 })(),
                        d = (e, t, n, r) => { n && n.map((([n, r, o]) => { const i = p(e, n),
                                    s = h(t, o),
                                    a = _(n);
                                l.ael(i, r, s, a), (t.$rmListeners$ = t.$rmListeners$ || []).push((() => l.rel(i, r, s, a))) })) },
                        h = (e, t) => n => { try { 256 & e.$flags$ ? e.$lazyInstance$[t](n) : (e.$queuedListeners$ = e.$queuedListeners$ || []).push([t, n]) } catch (e) { oe(e) } },
                        p = (e, t) => 8 & t ? s : e,
                        _ = e => 0 != (2 & e),
                        f = "http://www.w3.org/1999/xlink",
                        m = new WeakMap,
                        g = e => { const t = e.$cmpMeta$,
                                n = e.$hostElement$,
                                r = t.$flags$,
                                o = (t.$tagName$, () => {}),
                                i = ((e, t, n, r) => { let o = b(t),
                                        i = ae.get(o); if (e = 11 === e.nodeType ? e : a, i)
                                        if ("string" == typeof i) { e = e.head || e; let t, n = m.get(e);
                                            n || m.set(e, n = new Set), n.has(o) || (t = a.createElement("style"), t.innerHTML = i, e.insertBefore(t, e.querySelector("link")), n && n.add(o)) } else e.adoptedStyleSheets.includes(i) || (e.adoptedStyleSheets = [...e.adoptedStyleSheets, i]);
                                    return o })(n.shadowRoot ? n.shadowRoot : n.getRootNode(), t);
                            10 & r && (n["s-sc"] = i, n.classList.add(i + "-h")), o() },
                        b = (e, t) => "sc-" + e.$tagName$,
                        y = {},
                        v = e => "object" === (e = typeof e) || "function" === e,
                        w = (e, t, ...n) => { let r = null,
                                o = null,
                                i = !1,
                                s = !1,
                                a = []; const l = t => { for (let n = 0; n < t.length; n++) r = t[n], Array.isArray(r) ? l(r) : null != r && "boolean" != typeof r && ((i = "function" != typeof e && !v(r)) && (r = String(r)), i && s ? a[a.length - 1].$text$ += r : a.push(i ? x(null, r) : r), s = i) }; if (l(n), t) { t.key && (o = t.key); { const e = t.className || t.class;
                                    e && (t.class = "object" != typeof e ? e : Object.keys(e).filter((t => e[t])).join(" ")) } } if ("function" == typeof e) return e(null === t ? {} : t, a, A); const u = x(e, null); return u.$attrs$ = t, a.length > 0 && (u.$children$ = a), u.$key$ = o, u },
                        x = (e, t) => { const n = { $flags$: 0, $tag$: e, $text$: t, $elm$: null, $children$: null, $attrs$: null, $key$: null }; return n },
                        $ = {},
                        A = { forEach: (e, t) => e.map(S).forEach(t), map: (e, t) => e.map(S).map(t).map(T) },
                        S = e => ({ vattrs: e.$attrs$, vchildren: e.$children$, vkey: e.$key$, vname: e.$name$, vtag: e.$tag$, vtext: e.$text$ }),
                        T = e => { if ("function" == typeof e.vtag) { const t = Object.assign({}, e.vattrs); return e.vkey && (t.key = e.vkey), e.vname && (t.name = e.vname), w(e.vtag, t, ...e.vchildren || []) } const t = x(e.vtag, e.vtext); return t.$attrs$ = e.vattrs, t.$children$ = e.vchildren, t.$key$ = e.vkey, t.$name$ = e.vname, t },
                        k = (e, t, n, r, o, i) => { if (n !== r) { let a = re(e, t),
                                    u = t.toLowerCase(); if ("class" === t) { const t = e.classList,
                                        o = L(n),
                                        i = L(r);
                                    t.remove(...o.filter((e => e && !i.includes(e)))), t.add(...i.filter((e => e && !o.includes(e)))) } else if ("style" === t) { for (const t in n) r && null != r[t] || (t.includes("-") ? e.style.removeProperty(t) : e.style[t] = ""); for (const t in r) n && r[t] === n[t] || (t.includes("-") ? e.style.setProperty(t, r[t]) : e.style[t] = r[t]) } else if ("key" === t);
                                else if ("ref" === t) r && r(e);
                                else if (a || "o" !== t[0] || "n" !== t[1]) { const s = v(r); if ((a || s && null !== r) && !o) try { if (e.tagName.includes("-")) e[t] = r;
                                        else { let o = null == r ? "" : r; "list" === t ? a = !1 : null != n && e[t] == o || (e[t] = o) } } catch (e) {}
                                    let l = !1;
                                    u !== (u = u.replace(/^xlink\:?/, "")) && (t = u, l = !0), null == r || !1 === r ? !1 === r && "" !== e.getAttribute(t) || (l ? e.removeAttributeNS(f, t) : e.removeAttribute(t)) : (!a || 4 & i || o) && !s && (r = !0 === r ? "" : r, l ? e.setAttributeNS(f, t, r) : e.setAttribute(t, r)) } else t = "-" === t[2] ? t.slice(3) : re(s, u) ? u.slice(2) : u[2] + t.slice(3), n && l.rel(e, t, n, !1), r && l.ael(e, t, r, !1) } },
                        E = /\s/,
                        L = e => e ? e.split(E) : [],
                        O = (e, t, n, r) => { const o = 11 === t.$elm$.nodeType && t.$elm$.host ? t.$elm$.host : t.$elm$,
                                i = e && e.$attrs$ || y,
                                s = t.$attrs$ || y; for (r in i) r in s || k(o, r, i[r], void 0, n, t.$flags$); for (r in s) k(o, r, i[r], s[r], n, t.$flags$) },
                        I = (e, t, n, o) => { let i, s, l = t.$children$[n],
                                u = 0; if (null !== l.$text$) i = l.$elm$ = a.createTextNode(l.$text$);
                            else if (i = l.$elm$ = a.createElement(l.$tag$), O(null, l, false), null != r && i["s-si"] !== r && i.classList.add(i["s-si"] = r), l.$children$)
                                for (u = 0; u < l.$children$.length; ++u) s = I(e, l, u), s && i.appendChild(s); return i },
                        P = (e, t, n, r, i, s) => { let a, l = e; for (l.shadowRoot && l.tagName === o && (l = l.shadowRoot); i <= s; ++i) r[i] && (a = I(null, n, i), a && (r[i].$elm$ = a, l.insertBefore(a, t))) },
                        F = (e, t, n, r, o) => { for (; t <= n; ++t)(r = e[t]) && (o = r.$elm$, M(r), o.remove()) },
                        C = (e, t) => e.$tag$ === t.$tag$ && e.$key$ === t.$key$,
                        R = (e, t) => { const n = t.$elm$ = e.$elm$,
                                r = e.$children$,
                                o = t.$children$,
                                i = t.$tag$,
                                s = t.$text$;
                            null === s ? ("slot" === i || O(e, t, false), null !== r && null !== o ? ((e, t, n, r) => { let o, i, s = 0,
                                    a = 0,
                                    l = 0,
                                    u = 0,
                                    c = t.length - 1,
                                    d = t[0],
                                    h = t[c],
                                    p = r.length - 1,
                                    _ = r[0],
                                    f = r[p]; for (; s <= c && a <= p;)
                                    if (null == d) d = t[++s];
                                    else if (null == h) h = t[--c];
                                else if (null == _) _ = r[++a];
                                else if (null == f) f = r[--p];
                                else if (C(d, _)) R(d, _), d = t[++s], _ = r[++a];
                                else if (C(h, f)) R(h, f), h = t[--c], f = r[--p];
                                else if (C(d, f)) R(d, f), e.insertBefore(d.$elm$, h.$elm$.nextSibling), d = t[++s], f = r[--p];
                                else if (C(h, _)) R(h, _), e.insertBefore(h.$elm$, d.$elm$), h = t[--c], _ = r[++a];
                                else { for (l = -1, u = s; u <= c; ++u)
                                        if (t[u] && null !== t[u].$key$ && t[u].$key$ === _.$key$) { l = u; break }
                                    l >= 0 ? (i = t[l], i.$tag$ !== _.$tag$ ? o = I(t && t[a], n, l) : (R(i, _), t[l] = void 0, o = i.$elm$), _ = r[++a]) : (o = I(t && t[a], n, a), _ = r[++a]), o && d.$elm$.parentNode.insertBefore(o, d.$elm$) }
                                s > c ? P(e, null == r[p + 1] ? null : r[p + 1].$elm$, n, r, a, p) : a > p && F(t, s, c) })(n, r, t, o) : null !== o ? (null !== e.$text$ && (n.textContent = ""), P(n, null, t, o, 0, o.length - 1)) : null !== r && F(r, 0, r.length - 1)) : e.$text$ !== s && (n.data = s) },
                        M = e => { e.$attrs$ && e.$attrs$.ref && e.$attrs$.ref(null), e.$children$ && e.$children$.map(M) },
                        D = (e, t) => { const n = e.$hostElement$,
                                i = e.$vnode$ || x(null, null),
                                s = (a = t) && a.$tag$ === $ ? t : w(null, null, t); var a;
                            o = n.tagName, s.$tag$ = null, s.$flags$ |= 4, e.$vnode$ = s, s.$elm$ = i.$elm$ = n.shadowRoot || n, r = n["s-sc"], R(i, s) },
                        U = e => ee(e).$hostElement$,
                        B = (e, t) => { t && !e.$onRenderResolve$ && t["s-p"] && t["s-p"].push(new Promise((t => e.$onRenderResolve$ = t))) },
                        H = (e, t) => { if (e.$flags$ |= 16, 4 & e.$flags$) return void(e.$flags$ |= 512);
                            B(e, e.$ancestorComponent$); return _e((() => q(e, t))) },
                        q = (e, t) => { const n = (e.$cmpMeta$.$tagName$, () => {}),
                                r = e.$lazyInstance$; let o; return t && (e.$flags$ |= 256, e.$queuedListeners$ && (e.$queuedListeners$.map((([e, t]) => z(r, e, t))), e.$queuedListeners$ = null), o = z(r, "componentWillLoad")), n(), X(o, (() => j(e, r, t))) },
                        j = async(e, t, n) => { const r = e.$hostElement$,
                                o = (e.$cmpMeta$.$tagName$, () => {}),
                                i = r["s-rc"];
                            n && g(e); const s = (e.$cmpMeta$.$tagName$, () => {});
                            G(e, t), i && (i.map((e => e())), r["s-rc"] = void 0), s(), o(); { const t = r["s-p"],
                                    n = () => V(e);
                                0 === t.length ? n() : (Promise.all(t).then(n), e.$flags$ |= 4, t.length = 0) } },
                        G = (e, t, n) => { try { t = t.render(), e.$flags$ &= -17, e.$flags$ |= 2, D(e, t) } catch (t) { oe(t, e.$hostElement$) } return null },
                        V = e => { e.$cmpMeta$.$tagName$; const t = e.$hostElement$,
                                n = () => {},
                                r = e.$lazyInstance$,
                                o = e.$ancestorComponent$;
                            64 & e.$flags$ ? (z(r, "componentDidUpdate"), n()) : (e.$flags$ |= 64, W(t), z(r, "componentDidLoad"), n(), e.$onReadyResolve$(t), o || N()), e.$onRenderResolve$ && (e.$onRenderResolve$(), e.$onRenderResolve$ = void 0), 512 & e.$flags$ && pe((() => H(e, !1))), e.$flags$ &= -517 },
                        N = e => { W(a.documentElement), pe((() => ((e, t, n) => { const r = l.ce(t, n); return e.dispatchEvent(r), r })(s, "appload", { detail: { namespace: "read-along" } }))) },
                        z = (e, t, n) => { if (e && e[t]) try { return e[t](n) } catch (e) { oe(e) } },
                        X = (e, t) => e && e.then ? e.then(t) : t(),
                        W = e => e.classList.add("hydrated"),
                        Q = (e, t, n, r) => { const o = ee(e),
                                i = o.$instanceValues$.get(t),
                                s = o.$flags$,
                                a = o.$lazyInstance$; var l, u;
                            l = n, u = r.$members$[t][0], n = null == l || v(l) ? l : 4 & u ? "false" !== l && ("" === l || !!l) : 1 & u ? String(l) : l, 8 & s && void 0 !== i || n === i || (o.$instanceValues$.set(t, n), a && 2 == (18 & s) && H(o, !1)) },
                        Y = (e, t, n) => { if (t.$members$) { const r = Object.entries(t.$members$),
                                    o = e.prototype; if (r.map((([e, [r]]) => {
                                        (31 & r || 2 & n && 32 & r) && Object.defineProperty(o, e, {get() { return t = e, ee(this).$instanceValues$.get(t); var t }, set(n) { Q(this, e, n, t) }, configurable: !0, enumerable: !0 }) })), 1 & n) { const t = new Map;
                                    o.attributeChangedCallback = function(e, n, r) { l.jmp((() => { const n = t.get(e);
                                            this.hasOwnProperty(n) && (r = this[n], delete this[n]), this[n] = (null !== r || "boolean" != typeof this[n]) && r })) }, e.observedAttributes = r.filter((([e, t]) => 15 & t[0])).map((([e, n]) => { const r = n[1] || e; return t.set(r, e), r })) } } return e },
                        Z = async(e, t, n, r, o) => { if (0 == (32 & t.$flags$)) {
                                { if (t.$flags$ |= 32, (o = se(n)).then) { const e = () => {};
                                        o = await o, e() }
                                    o.isProxied || (Y(o, n, 2), o.isProxied = !0); const e = (n.$tagName$, () => {});
                                    t.$flags$ |= 8; try { new o(t) } catch (e) { oe(e) }
                                    t.$flags$ &= -9, e() } if (o.style) { let e = o.style; const t = b(n); if (!ae.has(t)) { const r = (n.$tagName$, () => {});
                                        ((e, t, n) => { let r = ae.get(e);
                                            c && n ? (r = r || new CSSStyleSheet, r.replace(t)) : r = t, ae.set(e, r) })(t, e, !!(1 & n.$flags$)), r() } } } const i = t.$ancestorComponent$,
                                s = () => H(t, !0);
                            i && i["s-rc"] ? i["s-rc"].push(s) : s() },
                        K = (e, t = {}) => { const n = () => {},
                                r = [],
                                o = t.exclude || [],
                                i = s.customElements,
                                u = a.head,
                                c = u.querySelector("meta[charset]"),
                                h = a.createElement("style"),
                                p = []; let _, f = !0;
                            Object.assign(l, t), l.$resourcesUrl$ = new URL(t.resourcesUrl || "./", a.baseURI).href, e.map((e => e[1].map((t => { const n = { $flags$: t[0], $tagName$: t[1], $members$: t[2], $listeners$: t[3] };
                                n.$members$ = t[2], n.$listeners$ = t[3]; const s = n.$tagName$,
                                    a = class extends HTMLElement { constructor(e) { super(e), ne(e = this, n), 1 & n.$flags$ && e.attachShadow({ mode: "open" }) }
                                        connectedCallback() { _ && (clearTimeout(_), _ = null), f ? p.push(this) : l.jmp((() => (e => { if (0 == (1 & l.$flags$)) { const t = ee(e),
                                                        n = t.$cmpMeta$,
                                                        r = (n.$tagName$, () => {}); if (1 & t.$flags$) d(e, t, n.$listeners$);
                                                    else { t.$flags$ |= 1; { let n = e; for (; n = n.parentNode || n.host;)
                                                                if (n["s-p"]) { B(t, t.$ancestorComponent$ = n); break } }
                                                        n.$members$ && Object.entries(n.$members$).map((([t, [n]]) => { if (31 & n && e.hasOwnProperty(t)) { const n = e[t];
                                                                delete e[t], e[t] = n } })), Z(0, t, n) }
                                                    r() } })(this))) }
                                        disconnectedCallback() { l.jmp((() => (e => { if (0 == (1 & l.$flags$)) { const t = ee(e);
                                                    t.$rmListeners$ && (t.$rmListeners$.map((e => e())), t.$rmListeners$ = void 0) } })(this))) }
                                        componentOnReady() { return ee(this).$onReadyPromise$ } };
                                n.$lazyBundleId$ = e[0], o.includes(s) || i.get(s) || (r.push(s), i.define(s, Y(a, n, 1))) })))), h.innerHTML = r + "{visibility:hidden}.hydrated{visibility:inherit}", h.setAttribute("data-styles", ""), u.insertBefore(h, c ? c.nextSibling : u.firstChild), f = !1, p.length ? p.map((e => e.connectedCallback())) : l.jmp((() => _ = setTimeout(N, 30))), n() },
                        J = new WeakMap,
                        ee = e => J.get(e),
                        te = (e, t) => J.set(t.$lazyInstance$ = e, t),
                        ne = (e, t) => { const n = { $flags$: 0, $hostElement$: e, $cmpMeta$: t, $instanceValues$: new Map }; return n.$onReadyPromise$ = new Promise((e => n.$onReadyResolve$ = e)), e["s-p"] = [], e["s-rc"] = [], d(e, n, t.$listeners$), J.set(e, n) },
                        re = (e, t) => t in e,
                        oe = (e, t) => (0, console.error)(e, t),
                        ie = new Map,
                        se = (e, t, r) => { const o = e.$tagName$.replace(/-/g, "_"),
                                i = e.$lazyBundleId$,
                                s = ie.get(i); return s ? s[o] : n(318)(`./${i}.entry.js`).then((e => (ie.set(i, e), e[o])), oe) },
                        ae = new Map,
                        le = [],
                        ue = [],
                        ce = (e, t) => n => { e.push(n), i || (i = !0, t && 4 & l.$flags$ ? pe(he) : l.raf(he)) },
                        de = e => { for (let t = 0; t < e.length; t++) try { e[t](performance.now()) } catch (e) { oe(e) }
                            e.length = 0 },
                        he = () => { de(le), de(ue), (i = le.length > 0) && l.raf(he) },
                        pe = e => u().then(e),
                        _e = ce(ue, !0) }, 159: (e, t, n) => { "use strict";
                        n.r(t), n.d(t, { read_along: () => M }); var r = n(437);

                        function o(e) { return "function" == typeof e } let i = !1; const s = { Promise: void 0, set useDeprecatedSynchronousErrorHandling(e) { if (e) { const e = new Error;
                                    console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n" + e.stack) } else i && console.log("RxJS: Back to a better error behavior. Thank you. <3");
                                i = e }, get useDeprecatedSynchronousErrorHandling() { return i } };

                        function a(e) { setTimeout((() => { throw e }), 0) } const l = { closed: !0, next(e) {}, error(e) { if (s.useDeprecatedSynchronousErrorHandling) throw e;
                                    a(e) }, complete() {} },
                            u = Array.isArray || (e => e && "number" == typeof e.length); const c = (() => {
                                    function e(e) { return Error.call(this), this.message = e ? `${e.length} errors occurred during unsubscription:\n${e.map(((e,t)=>`${t+1}) ${e.toString()}`)).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();class d{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:n,_unsubscribe:r,_subscriptions:i}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof d)t.remove(this);else if(null!==t)for(let e=0;e<t.length;++e){t[e].remove(this)}if(o(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(t){e=t instanceof c?h(t.errors):[t]}}if(u(i)){let t=-1,n=i.length;for(;++t<n;){const n=i[t];if(null!==(s=n)&&"object"==typeof s)try{n.unsubscribe()}catch(t){e=e||[],t instanceof c?e=e.concat(h(t.errors)):e.push(t)}}}var s;if(e)throw new c(e)}add(e){let t=e;if(!e)return d.EMPTY;switch(typeof e){case"function":t=new d(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof d)){const e=t;t=new d,t._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=t;if(null===n)t._parentOrParents=this;else if(n instanceof d){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}function h(e){return e.reduce(((e,t)=>e.concat(t instanceof c?t.errors:t)),[])}d.EMPTY=function(e){return e.closed=!0,e}(new d);const p="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class _ extends d{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=l;break;case 1:if(!e){this.destination=l;break}if("object"==typeof e){e instanceof _?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new f(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new f(this,e,t,n)}}[p](){return this}static create(e,t,n){const r=new _(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class f extends _{constructor(e,t,n,r){let i;super(),this._parentSubscriber=e;let s=this;o(t)?i=t:t&&(i=t.next,n=t.error,r=t.complete,t!==l&&(s=Object.create(t),o(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=i,this._error=n,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):a(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;a(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw e;a(e)}}__tryOrSetError(e,t,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(a(t),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const m="function"==typeof Symbol&&Symbol.observable||"@@observable";function g(e){return e}class b{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(e){const t=new b;return t.source=this,t.operator=e,t}subscribe(e,t,n){const{operator:r}=this,o=function(e,t,n){if(e){if(e instanceof _)return e;if(e[p])return e[p]()}return e||t||n?new _(e,t,n):new _(l)}(e,t,n);if(r?o.add(r.call(o,this.source)):o.add(this.source||s.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),s.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(e){try{return this._subscribe(e)}catch(t){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){const{closed:t,destination:n,isStopped:r}=e;if(t||r)return!1;e=n&&n instanceof _?n:null}return!0}(e)?console.warn(t):e.error(t)}}forEach(e,t){return new(t=y(t))(((t,n)=>{let r;r=this.subscribe((t=>{try{e(t)}catch(e){n(e),r&&r.unsubscribe()}}),n,t)}))}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[m](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?g:1===t.length?t[0]:function(e){return t.reduce(((e,t)=>t(e)),e)})(this);var t}toPromise(e){return new(e=y(e))(((e,t)=>{let n;this.subscribe((e=>n=e),(e=>t(e)),(()=>e(n)))}))}}function y(e){if(e||(e=Promise),!e)throw new Error("no Promise impl found");return e}b.create=e=>new b(e);class v{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new w(e,this.compare,this.keySelector))}}class w extends _{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(e){return this.destination.error(e)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(e){return this.destination.error(e)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}const x=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class $ extends d{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class A extends _{constructor(e){super(e),this.destination=e}}class S extends b{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[p](){return new A(this)}lift(e){const t=new T(this,this);return t.operator=e,t}next(e){if(this.closed)throw new x;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let t=0;t<n;t++)r[t].next(e)}}error(e){if(this.closed)throw new x;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let t=0;t<n;t++)r[t].error(e);this.observers.length=0}complete(){if(this.closed)throw new x;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let e=0;e<t;e++)n[e].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new x;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new x;return this.hasError?(e.error(this.thrownError),d.EMPTY):this.isStopped?(e.complete(),d.EMPTY):(this.observers.push(e),new $(this,e))}asObservable(){const e=new b;return e.source=this,e}}S.create=(e,t)=>new T(e,t);class T extends S{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):d.EMPTY}}class k extends S{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new x;return this._value}next(e){super.next(this._value=e)}}var E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};var L,O,I,P=(L=function(e,t){
/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
!function(){var e=function(){this.init()};e.prototype={init:function(){var e=this||n;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||n;if(e=parseFloat(e),t.ctx||c(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,n.ctx.currentTime);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var o=t._howls[r]._getSoundIds(),i=0;i<o.length;i++){var s=t._howls[r]._soundById(o[i]);s&&s._node&&(s._node.volume=s._volume*e)}return t}return t._volume},mute:function(e){var t=this||n;t.ctx||c(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,n.ctx.currentTime);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var o=t._howls[r]._getSoundIds(),i=0;i<o.length;i++){var s=t._howls[r]._soundById(o[i]);s&&s._node&&(s._node.muted=!!e||s._muted)}return t},stop:function(){for(var e=this||n,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||n,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,c()),e},codecs:function(e){return(this||n)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||n;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||n,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var r=t.canPlayType("audio/mpeg;").replace(/^no$/,""),o=e._navigator?e._navigator.userAgent:"",i=o.match(/OPR\/([0-6].)/g),s=i&&parseInt(i[0].split("/")[1],10)<33,a=-1!==o.indexOf("Safari")&&-1===o.indexOf("Chrome"),l=o.match(/Version\/(.*?) /),u=a&&l&&parseInt(l[1],10)<15;return e._codecs={mp3:!(s||!r&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!r,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(u||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(u||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||n;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,e._releaseHtml5Audio(r)}catch(n){e.noAudio=!0;break}for(var o=0;o<e._howls.length;o++)if(!e._howls[o]._webAudio)for(var i=e._howls[o]._getSoundIds(),s=0;s<i.length;s++){var a=e._howls[o]._soundById(i[s]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}e._autoResume();var l=e.ctx.createBufferSource();l.buffer=e._scratchBuffer,l.connect(e.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),l.onended=function(){l.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||n;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||n;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&n.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var r=0;r<e._howls[t]._sounds.length;r++)if(!e._howls[t]._sounds[r]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&n.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var n=new e,r=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};r.prototype={init:function(e){var t=this;return n.ctx||c(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=n.usingWebAudio&&!t._html5,void 0!==n.ctx&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(n.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var i,a;if(e._format&&e._format[r])i=e._format[r];else{if("string"!=typeof(a=e._src[r])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(i=/^data:audio\/([^;,]+);/i.exec(a))||(i=/\.([^.]+)$/.exec(a.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&n.codecs(i)){t=e._src[r];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new o(e),e._webAudio&&s(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var r=this,o=null;if("number"==typeof e)o=e,e=null;else{if("string"==typeof e&&"loaded"===r._state&&!r._sprite[e])return null;if(void 0===e&&(e="__default",!r._playLock)){for(var i=0,s=0;s<r._sounds.length;s++)r._sounds[s]._paused&&!r._sounds[s]._ended&&(i++,o=r._sounds[s]._id);1===i?e=null:o=null}}var a=o?r._soundById(o):r._inactiveSound();if(!a)return null;if(o&&!e&&(e=a._sprite||"__default"),"loaded"!==r._state){a._sprite=e,a._ended=!1;var l=a._id;return r._queue.push({event:"play",action:function(){r.play(l)}}),l}if(o&&!a._paused)return t||r._loadQueue("play"),a._id;r._webAudio&&n._autoResume();var u=Math.max(0,a._seek>0?a._seek:r._sprite[e][0]/1e3),c=Math.max(0,(r._sprite[e][0]+r._sprite[e][1])/1e3-u),d=1e3*c/Math.abs(a._rate),h=r._sprite[e][0]/1e3,p=(r._sprite[e][0]+r._sprite[e][1])/1e3;a._sprite=e,a._ended=!1;var _=function(){a._paused=!1,a._seek=u,a._start=h,a._stop=p,a._loop=!(!a._loop&&!r._sprite[e][2])};if(!(u>=p)){var f=a._node;if(r._webAudio){var m=function(){r._playLock=!1,_(),r._refreshBuffer(a);var e=a._muted||r._muted?0:a._volume;f.gain.setValueAtTime(e,n.ctx.currentTime),a._playStart=n.ctx.currentTime,void 0===f.bufferSource.start?a._loop?f.bufferSource.noteGrainOn(0,u,86400):f.bufferSource.noteGrainOn(0,u,c):a._loop?f.bufferSource.start(0,u,86400):f.bufferSource.start(0,u,c),d!==1/0&&(r._endTimers[a._id]=setTimeout(r._ended.bind(r,a),d)),t||setTimeout((function(){r._emit("play",a._id),r._loadQueue()}),0)};"running"===n.state&&"interrupted"!==n.ctx.state?m():(r._playLock=!0,r.once("resume",m),r._clearTimer(a._id))}else{var g=function(){f.currentTime=u,f.muted=a._muted||r._muted||n._muted||f.muted,f.volume=a._volume*n.volume(),f.playbackRate=a._rate;try{var o=f.play();if(o&&"undefined"!=typeof Promise&&(o instanceof Promise||"function"==typeof o.then)?(r._playLock=!0,_(),o.then((function(){r._playLock=!1,f._unlocked=!0,t?r._loadQueue():r._emit("play",a._id)})).catch((function(){r._playLock=!1,r._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0}))):t||(r._playLock=!1,_(),r._emit("play",a._id)),f.playbackRate=a._rate,f.paused)return void r._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||a._loop?r._endTimers[a._id]=setTimeout(r._ended.bind(r,a),d):(r._endTimers[a._id]=function(){r._ended(a),f.removeEventListener("ended",r._endTimers[a._id],!1)},f.addEventListener("ended",r._endTimers[a._id],!1))}catch(e){r._emit("playerror",a._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===f.src&&(f.src=r._src,f.load());var b=window&&window.ejecta||!f.readyState&&n._navigator.isCocoonJS;if(f.readyState>=3||b)g();else{r._playLock=!0,r._state="loading";var y=function(){r._state="loaded",g(),f.removeEventListener(n._canPlayEvent,y,!1)};f.addEventListener(n._canPlayEvent,y,!1),r._clearTimer(a._id)}}return a._id}r._ended(a)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),r=0;r<n.length;r++){t._clearTimer(n[r]);var o=t._soundById(n[r]);if(o&&!o._paused&&(o._seek=t.seek(n[r]),o._rateSeek=0,o._paused=!0,t._stopFade(n[r]),o._node))if(t._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),t._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||t._emit("pause",o?o._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var r=n._getSoundIds(e),o=0;o<r.length;o++){n._clearTimer(r[o]);var i=n._soundById(r[o]);i&&(i._seek=i._start||0,i._rateSeek=0,i._paused=!0,i._ended=!0,n._stopFade(r[o]),i._node&&(n._webAudio?i._node.bufferSource&&(void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),n._cleanBuffer(i._node)):isNaN(i._node.duration)&&i._node.duration!==1/0||(i._node.currentTime=i._start||0,i._node.pause(),i._node.duration===1/0&&n._clearSound(i._node))),t||n._emit("stop",i._id))}return n},mute:function(e,t){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"mute",action:function(){r.mute(e,t)}}),r;if(void 0===t){if("boolean"!=typeof e)return r._muted;r._muted=e}for(var o=r._getSoundIds(t),i=0;i<o.length;i++){var s=r._soundById(o[i]);s&&(s._muted=e,s._interval&&r._stopFade(s._id),r._webAudio&&s._node?s._node.gain.setValueAtTime(e?0:s._volume,n.ctx.currentTime):s._node&&(s._node.muted=!!n._muted||e),r._emit("mute",s._id))}return r},volume:function(){var e,t,r,o=this,i=arguments;if(0===i.length)return o._volume;if(1===i.length||2===i.length&&void 0===i[1]){var s=o._getSoundIds(),a=s.indexOf(i[0]);a>=0?t=parseInt(i[0],10):e=parseFloat(i[0])}else i.length>=2&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(r=t?o._soundById(t):o._sounds[0])?r._volume:0;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"volume",action:function(){o.volume.apply(o,i)}}),o;void 0===t&&(o._volume=e),t=o._getSoundIds(t);for(var l=0;l<t.length;l++)(r=o._soundById(t[l]))&&(r._volume=e,i[2]||o._stopFade(t[l]),o._webAudio&&r._node&&!r._muted?r._node.gain.setValueAtTime(e,n.ctx.currentTime):r._node&&!r._muted&&(r._node.volume=e*n.volume()),o._emit("volume",r._id));return o},fade:function(e,t,r,o){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(e,t,r,o)}}),i;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),r=parseFloat(r),i.volume(e,o);for(var s=i._getSoundIds(o),a=0;a<s.length;a++){var l=i._soundById(s[a]);if(l){if(o||i._stopFade(s[a]),i._webAudio&&!l._muted){var u=n.ctx.currentTime,c=u+r/1e3;l._volume=e,l._node.gain.setValueAtTime(e,u),l._node.gain.linearRampToValueAtTime(t,c)}i._startFadeInterval(l,e,t,r,s[a],void 0===o)}}return i},_startFadeInterval:function(e,t,n,r,o,i){var s=this,a=t,l=n-t,u=Math.abs(l/.01),c=Math.max(4,u>0?r/u:r),d=Date.now();e._fadeTo=n,e._interval=setInterval((function(){var o=(Date.now()-d)/r;d=Date.now(),a+=l*o,a=Math.round(100*a)/100,a=l<0?Math.max(n,a):Math.min(n,a),s._webAudio?e._volume=a:s.volume(a,e._id,!0),i&&(s._volume=a),(n<t&&a<=n||n>t&&a>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,s.volume(n,e._id),s._emit("fade",e._id))}),c)},_stopFade:function(e){var t=this,r=t._soundById(e);return r&&r._interval&&(t._webAudio&&r._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(r._interval),r._interval=null,t.volume(r._fadeTo,e),r._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,n,r=this,o=arguments;if(0===o.length)return r._loop;if(1===o.length){if("boolean"!=typeof o[0])return!!(n=r._soundById(parseInt(o[0],10)))&&n._loop;e=o[0],r._loop=e}else 2===o.length&&(e=o[0],t=parseInt(o[1],10));for(var i=r._getSoundIds(t),s=0;s<i.length;s++)(n=r._soundById(i[s]))&&(n._loop=e,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,r.playing(i[s])&&(r.pause(i[s],!0),r.play(i[s],!0)))));return r},rate:function(){var e,t,r,o=this,i=arguments;if(0===i.length)t=o._sounds[0]._id;else if(1===i.length){var s=o._getSoundIds(),a=s.indexOf(i[0]);a>=0?t=parseInt(i[0],10):e=parseFloat(i[0])}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if("number"!=typeof e)return(r=o._soundById(t))?r._rate:o._rate;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"rate",action:function(){o.rate.apply(o,i)}}),o;void 0===t&&(o._rate=e),t=o._getSoundIds(t);for(var l=0;l<t.length;l++)if(r=o._soundById(t[l])){o.playing(t[l])&&(r._rateSeek=o.seek(t[l]),r._playStart=o._webAudio?n.ctx.currentTime:r._playStart),r._rate=e,o._webAudio&&r._node&&r._node.bufferSource?r._node.bufferSource.playbackRate.setValueAtTime(e,n.ctx.currentTime):r._node&&(r._node.playbackRate=e);var u=o.seek(t[l]),c=(o._sprite[r._sprite][0]+o._sprite[r._sprite][1])/1e3-u,d=1e3*c/Math.abs(r._rate);!o._endTimers[t[l]]&&r._paused||(o._clearTimer(t[l]),o._endTimers[t[l]]=setTimeout(o._ended.bind(o,r),d)),o._emit("rate",r._id)}return o},seek:function(){var e,t,r=this,o=arguments;if(0===o.length)r._sounds.length&&(t=r._sounds[0]._id);else if(1===o.length){var i=r._getSoundIds(),s=i.indexOf(o[0]);s>=0?t=parseInt(o[0],10):r._sounds.length&&(t=r._sounds[0]._id,e=parseFloat(o[0]))}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if(void 0===t)return 0;if("number"==typeof e&&("loaded"!==r._state||r._playLock))return r._queue.push({event:"seek",action:function(){r.seek.apply(r,o)}}),r;var a=r._soundById(t);if(a){if(!("number"==typeof e&&e>=0)){if(r._webAudio){var l=r.playing(t)?n.ctx.currentTime-a._playStart:0,u=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(u+l*Math.abs(a._rate))}return a._node.currentTime}var c=r.playing(t);c&&r.pause(t,!0),a._seek=e,a._ended=!1,r._clearTimer(t),r._webAudio||!a._node||isNaN(a._node.duration)||(a._node.currentTime=e);var d=function(){c&&r.play(t,!0),r._emit("seek",t)};if(c&&!r._webAudio){var h=function(){r._playLock?setTimeout(h,0):d()};setTimeout(h,0)}else d()}return r},playing:function(e){var t=this;if("number"==typeof e){var n=t._soundById(e);return!!n&&!n._paused}for(var r=0;r<t._sounds.length;r++)if(!t._sounds[r]._paused)return!0;return!1},duration:function(e){var t=this,n=t._duration,r=t._soundById(e);return r&&(n=t._sprite[r._sprite][1]/1e3),n},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,r=0;r<t.length;r++)t[r]._paused||e.stop(t[r]._id),e._webAudio||(e._clearSound(t[r]._node),t[r]._node.removeEventListener("error",t[r]._errorFn,!1),t[r]._node.removeEventListener(n._canPlayEvent,t[r]._loadFn,!1),t[r]._node.removeEventListener("ended",t[r]._endFn,!1),n._releaseHtml5Audio(t[r]._node)),delete t[r]._node,e._clearTimer(t[r]._id);var o=n._howls.indexOf(e);o>=0&&n._howls.splice(o,1);var s=!0;for(r=0;r<n._howls.length;r++)if(n._howls[r]._src===e._src||e._src.indexOf(n._howls[r]._src)>=0){s=!1;break}return i&&s&&delete i[e._src],n.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,r){var o=this["_on"+e];return"function"==typeof t&&o.push(r?{id:n,fn:t,once:r}:{id:n,fn:t}),this},off:function(e,t,n){var r=this,o=r["_on"+e],i=0;if("number"==typeof t&&(n=t,t=null),t||n)for(i=0;i<o.length;i++){var s=n===o[i].id;if(t===o[i].fn&&s||!t&&s){o.splice(i,1);break}}else if(e)r["_on"+e]=[];else{var a=Object.keys(r);for(i=0;i<a.length;i++)0===a[i].indexOf("_on")&&Array.isArray(r[a[i]])&&(r[a[i]]=[])}return r},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var r=this,o=r["_on"+e],i=o.length-1;i>=0;i--)o[i].id&&o[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(r,o[i].fn),0),o[i].once&&r.off(e,o[i].fn,o[i].id));return r._loadQueue(e),r},_loadQueue:function(e){var t=this;if(t._queue.length>0){var n=t._queue[0];n.event===e&&(t._queue.shift(),t._loadQueue()),e||n.action()}return t},_ended:function(e){var t=this,r=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var o=!(!e._loop&&!t._sprite[r][2]);if(t._emit("end",e._id),!t._webAudio&&o&&t.stop(e._id,!0).play(e._id),t._webAudio&&o){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=n.ctx.currentTime;var i=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),i)}return t._webAudio&&!o&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),n._autoSuspend()),t._webAudio||o||t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var n=t._soundById(e);n&&n._node&&n._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,n=0;n<t._sounds.length;n++)if(e===t._sounds[n]._id)return t._sounds[n];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new o(e)},_drain:function(){var e=this,t=e._pool,n=0,r=0;if(!(e._sounds.length<t)){for(r=0;r<e._sounds.length;r++)e._sounds[r]._ended&&n++;for(r=e._sounds.length-1;r>=0;r--){if(n<=t)return;e._sounds[r]._ended&&(e._webAudio&&e._sounds[r]._node&&e._sounds[r]._node.disconnect(0),e._sounds.splice(r,1),n--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=n.ctx.createBufferSource(),e._node.bufferSource.buffer=i[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,n.ctx.currentTime),this},_cleanBuffer:function(e){var t=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=n._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function(e){this._parent=e,this.init()};o.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,r=n._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),e._node.gain.setValueAtTime(r,n.ctx.currentTime),e._node.paused=!0,e._node.connect(n.masterGain)):n.noAudio||(e._node=n._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(n._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=r*n.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(n._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var i={},s=function(e){var t=e._src;if(i[t])return e._duration=i[t].duration,void u(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);l(r.buffer,e)}else{var s=new XMLHttpRequest;s.open(e._xhr.method,t,!0),s.withCredentials=e._xhr.withCredentials,s.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){s.setRequestHeader(t,e._xhr.headers[t])})),s.onload=function(){var t=(s.status+"")[0];"0"===t||"2"===t||"3"===t?l(s.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+s.status+".")},s.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete i[t],e.load())},a(s)}},a=function(e){try{e.send()}catch(t){e.onerror()}},l=function(e,t){var r=function(){t._emit("loaderror",null,"Decoding audio data failed.")},o=function(e){e&&t._sounds.length>0?(i[t._src]=e,u(t,e)):r()};"undefined"!=typeof Promise&&1===n.ctx.decodeAudioData.length?n.ctx.decodeAudioData(e).then(o).catch(r):n.ctx.decodeAudioData(e,o,r)},u=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},c=function(){if(n.usingWebAudio){try{"undefined"!=typeof AudioContext?n.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch(e){n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),t=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),r=t?parseInt(t[1],10):null;if(e&&r&&r<9){var o=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!o&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};t.Howler=n,t.Howl=r,void 0!==E?(E.HowlerGlobal=e,E.Howler=n,E.Howl=r,E.Sound=o):"undefined"!=typeof window&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=r,window.Sound=o)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var n=t._howls.length-1;n>=0;n--)t._howls[n].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,n){var r=this;return r.ctx&&r.ctx.listener?(t="number"!=typeof t?r._pos[1]:t,n="number"!=typeof n?r._pos[2]:n,"number"!=typeof e?r._pos:(r._pos=[e,t,n],void 0!==r.ctx.listener.positionX?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(e,t,n,r,o,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;var a=s._orientation;return t="number"!=typeof t?a[1]:t,n="number"!=typeof n?a[2]:n,r="number"!=typeof r?a[3]:r,o="number"!=typeof o?a[4]:o,i="number"!=typeof i?a[5]:i,"number"!=typeof e?a:(s._orientation=[e,t,n,r,o,i],void 0!==s.ctx.listener.forwardX?(s.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),s.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),s.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),s.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),s.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),s.ctx.listener.upZ.setTargetAtTime(i,Howler.ctx.currentTime,.1)):s.ctx.listener.setOrientation(e,t,n,r,o,i),s)},Howl.prototype.init=(e=Howl.prototype.init,function(t){var n=this;return n._orientation=t.orientation||[1,0,0],n._stereo=t.stereo||null,n._pos=t.pos||null,n._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},n._onstereo=t.onstereo?[{fn:t.onstereo}]:[],n._onpos=t.onpos?[{fn:t.onpos}]:[],n._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(e,n)}}),r;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof e)return r._stereo;r._stereo=e,r._pos=[e,0,0]}for(var i=r._getSoundIds(n),s=0;s<i.length;s++){var a=r._soundById(i[s]);if(a){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||t(a,o),"spatial"===o?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(e,0,0):a._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),r._emit("stereo",a._id)}}return r},Howl.prototype.pos=function(e,n,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(e,n,r,o)}}),i;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===o){if("number"!=typeof e)return i._pos;i._pos=[e,n,r]}for(var s=i._getSoundIds(o),a=0;a<s.length;a++){var l=i._soundById(s[a]);if(l){if("number"!=typeof e)return l._pos;l._pos=[e,n,r],l._node&&(l._panner&&!l._panner.pan||t(l,"spatial"),void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):l._panner.setPosition(e,n,r)),i._emit("pos",l._id)}}return i},Howl.prototype.orientation=function(e,n,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(e,n,r,o)}}),i;if(n="number"!=typeof n?i._orientation[1]:n,r="number"!=typeof r?i._orientation[2]:r,void 0===o){if("number"!=typeof e)return i._orientation;i._orientation=[e,n,r]}for(var s=i._getSoundIds(o),a=0;a<s.length;a++){var l=i._soundById(s[a]);if(l){if("number"!=typeof e)return l._orientation;l._orientation=[e,n,r],l._node&&(l._panner||(l._pos||(l._pos=i._pos||[0,0,-.5]),t(l,"spatial")),void 0!==l._panner.orientationX?(l._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):l._panner.setOrientation(e,n,r)),i._emit("orientation",l._id)}}return i},Howl.prototype.pannerAttr=function(){var e,n,r,o=this,i=arguments;if(!o._webAudio)return o;if(0===i.length)return o._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return(r=o._soundById(parseInt(i[0],10)))?r._pannerAttr:o._pannerAttr;e=i[0],void 0===n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),o._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:o._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:o._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:o._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:o._panningModel})}else 2===i.length&&(e=i[0],n=parseInt(i[1],10));for(var s=o._getSoundIds(n),a=0;a<s.length;a++)if(r=o._soundById(s[a])){var l=r._pannerAttr;l={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:l.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:l.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:l.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:l.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:l.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:l.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:l.panningModel};var u=r._panner;u?(u.coneInnerAngle=l.coneInnerAngle,u.coneOuterAngle=l.coneOuterAngle,u.coneOuterGain=l.coneOuterGain,u.distanceModel=l.distanceModel,u.maxDistance=l.maxDistance,u.refDistance=l.refDistance,u.rolloffFactor=l.rolloffFactor,u.panningModel=l.panningModel):(r._pos||(r._pos=o._pos||[0,0,-.5]),t(r,"spatial"))}return o},Sound.prototype.init=function(e){return function(){var t=this,n=t._parent;t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,e.call(this),t._stereo?n.stereo(t._stereo):t._pos&&n.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,n=t._parent;return t._orientation=n._orientation,t._stereo=n._stereo,t._pos=n._pos,t._pannerAttr=n._pannerAttr,t._stereo?n.stereo(t._stereo):t._pos?n.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,n._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()},L(I={path:O,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},I.exports),I.exports);function F(e){let t=new XMLHttpRequest;return t.open("GET",e,!1),t.addEventListener("error",(function(e){console.log(e)})),t.send(),t.responseText}function C(e,t){let n=t.lookupNamespaceURI(null);let r=[],o=t.evaluate(e,t,(function(e){return{i:n}[e]||null}),XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),i=o.iterateNext();for(;i;)r.push(i),i=o.iterateNext();return r}var R=function(e){var t=this;t.sounds=[],t._sprite=e.sprite,t._reading$=new S,t._tinySprite=Object.keys(e.sprite).map((e=>[t._sprite[e][0],e])),t._tinySprite.pop(),t._percentPlayed=new k("0%"),t.sound=new P.Howl({src:e.src,sprite:e.sprite,rate:e.rate}),requestAnimationFrame(t.step.bind(t))};R.prototype={play:function(e){var t=this;t._spriteLeft=t._tinySprite;var n=e;return t.sound.play(n)},pause:function(){return this.sound.pause(),this.sound.id},goBack:function(e,t){var n=this;if(n._spriteLeft=n._tinySprite,n.sound.seek(e=e)-t>0){e=n.sound.seek(n.sound.seek(e=e)-t,e);for(var r=n.sound.seek(e=e),o=0;o<n._spriteLeft.length;o++)1e3*r>=n._spriteLeft[o][0]&&(n._reading$.next(n._spriteLeft[o][1]),n._spriteLeft=n._spriteLeft.slice(o,n._spriteLeft.length))}else{e=n.sound.seek(0,e);n._reading$.next(n._spriteLeft[0][1])}return e},goTo:function(e,t){var n=this;n._spriteLeft=n._tinySprite;e=n.sound.seek(t,e);for(var r=n.sound.seek(e=e),o=0;o<n._spriteLeft.length;o++)1e3*r>=n._spriteLeft[o][0]&&(n._reading$.next(n._spriteLeft[o][1]),n._spriteLeft=n._spriteLeft.slice(o,n._spriteLeft.length));return e},stop:function(){return this._reading$.next(""),this.sound.stop()},step:function(){for(var e=this,t=0;t<e.sounds.length;t++){for(var n=e.sound.seek()||0,r=0;r<e._spriteLeft.length;r++)n>0&&1e3*n>=e._spriteLeft[r][0]&&(e._reading$.next(e._spriteLeft[r][1]),e._spriteLeft=e._spriteLeft.slice(r,e._spriteLeft.length));let o=(n/e.sound.duration()*100||0)+"%";e.sounds[t].style.width=o,e.sounds[t].setAttribute("offset",o)}requestAnimationFrame(e.step.bind(e))}};const M=class{constructor(e){(0,r.r)(this,e),this.theme="light",this.language="eng",this.useAssetsFolder=!0,this.pageScrolling="horizontal",this.playing=!1,this.playback_rate=1,this.fullscreen=!1,this.autoScroll=!0,this.isLoaded=!1,this.showGuide=!1,this.hasTextTranslations=!1,this.assetsStatus={AUDIO:0,XML:0,SMIL:0},this.Guide=()=>(0,r.h)("button",{class:"scroll-guide__container ripple ui-button theme--"+this.theme,onClick:()=>this.hideGuideAndScroll()},(0,r.h)("span",{class:"scroll-guide__text theme--"+this.theme},this.returnTranslation("re-align",this.language))),this.Overlay=()=>(0,r.h)("object",{onClick:e=>this.goToSeekFromProgress(e),id:"overlay__object",type:"image/svg+xml",data:this.svgOverlay}),this.Img=e=>(0,r.h)("div",{class:"image__container page__col__image theme--"+this.theme},(0,r.h)("img",{alt:"image",class:"image",src:this.urlTransform(e.url)})),this.PageCount=e=>(0,r.h)("div",{class:"page__counter color--"+this.theme},"Page"," ",(0,r.h)("span",{"data-cy":"page-count__current"},e.currentPage)," / ",(0,r.h)("span",{"data-cy":"page-count__total"},e.pgCount)),this.Page=e=>(0,r.h)("div",{class:"page page__container page--multi animate-transition  theme--"+this.theme+" "+(e.pageData.attributes.class?e.pageData.attributes.class.value:""),id:e.pageData.id},this.parsed_text.length>1?(0,r.h)(this.PageCount,{pgCount:this.parsed_text.length,currentPage:this.parsed_text.indexOf(e.pageData)+1}):null,e.pageData.img?(0,r.h)(this.Img,{url:e.pageData.img}):null,(0,r.h)("div",{class:"page__col__text paragraph__container theme--"+this.theme},e.pageData.paragraphs.map((e=>(0,r.h)(this.Paragraph,{sentences:Array.from(e.childNodes),attributes:e.attributes}))))),this.Paragraph=e=>(0,r.h)("div",{class:"paragraph sentence__container theme--"+this.theme+" "+(e.attributes.class?e.attributes.class.value:"")},e.sentences.map((e=>e.childNodes.length>0&&(0,r.h)(this.Sentence,{words:Array.from(e.childNodes),attributes:e.attributes})))),this.Sentence=e=>{!this.hasTextTranslations&&e.attributes.class&&(this.hasTextTranslations=null!=e.attributes.class.value.match("translation"));let t={};return e.attributes&&e.attributes["xml:lang"]&&(t.lang=e.attributes["xml:lang"].value),e.attributes&&e.attributes.lang&&(t.lang=e.attributes.lang.value),(0,r.h)("div",Object.assign({},t,{class:"sentence "+(e.attributes.class?e.attributes.class.value:"")}),e.words.map(((t,n)=>{if("#text"===t.nodeName)return(0,r.h)(this.NonWordText,{text:t.textContent,attributes:t.attributes,id:(e.attributes.id?e.attributes.id.value:"P")+"text"+n});if("w"===t.nodeName)return(0,r.h)(this.Word,{text:t.textContent,id:t.id,attributes:t.attributes});if(t){let o={};return t.attributes["xml:lang"]&&(o.lang=e.attributes["xml:lang"].value),t.attributes.lang&&(o.lang=e.attributes.lang.value),(0,r.h)("span",Object.assign({},o,{class:"sentence__text theme--"+this.theme+" "+t.className,id:t.id?t.id:"text_"+n}),t.textContent)}})))},this.NonWordText=e=>{let t={};return e.attributes&&e.attributes["xml:lang"]&&(t.lang=e.attributes["xml:lang"].value),e.attributes&&e.attributes.lang&&(t.lang=e.attributes.lang.value),(0,r.h)("span",Object.assign({},t,{class:"sentence__text theme--"+this.theme,id:e.id}),e.text)},this.Word=e=>{let t={};return e.attributes&&e.attributes["xml:lang"]&&(t.lang=e.attributes["xml:lang"].value),e.attributes&&e.attributes.lang&&(t.lang=e.attributes.lang.value),(0,r.h)("span",Object.assign({},t,{class:"sentence__word theme--"+this.theme+" "+(e&&e.attributes.class?e.attributes.class.value:""),id:e.id,onClick:e=>this.playSprite(e)}),e.text)},this.PlayControl=()=>(0,r.h)("button",{"data-cy":"play-button",disabled:!this.isLoaded,"aria-label":"Play",onClick:()=>{this.playing?this.pause():this.play()},class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,r.h)("i",{class:"material-icons"},this.playing?"pause":"play_arrow")),this.ReplayControl=()=>(0,r.h)("button",{"data-cy":"replay-button",disabled:!this.isLoaded,"aria-label":"Rewind",onClick:()=>this.goBack(5),class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,r.h)("i",{class:"material-icons"},"replay_5")),this.StopControl=()=>(0,r.h)("button",{"data-cy":"stop-button",disabled:!this.isLoaded,"aria-label":"Stop",onClick:()=>this.stop(),class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,r.h)("i",{class:"material-icons"},"stop")),this.PlaybackSpeedControl=()=>(0,r.h)("div",null,(0,r.h)("h5",{class:"control-panel__buttons__header color--"+this.theme},this.returnTranslation("speed",this.language)),(0,r.h)("input",{type:"range",min:"75",max:"125",value:100*this.playback_rate,class:"slider control-panel__control",id:"myRange",onInput:e=>this.changePlayback(e)})),this.StyleControl=()=>(0,r.h)("button",{"aria-label":"Change theme",onClick:()=>this.changeTheme(),class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,r.h)("i",{class:"material-icons-outlined"},"style")),this.FullScreenControl=()=>(0,r.h)("button",{"aria-label":"Full screen mode",onClick:()=>this.toggleFullscreen(),class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,r.h)("i",{class:"material-icons","aria-label":"Full screen mode"},this.fullscreen?"fullscreen_exit":"fullscreen")),this.TextTranslationDisplayControl=()=>(0,r.h)("button",{"data-cy":"translation-toggle","aria-label":"Toggle Translation",onClick:()=>this.toggleTextTranslation(),class:"control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,r.h)("i",{class:"material-icons-outlined"},"subtitles")),this.ControlPanel=()=>(0,r.h)("div",{"data-cy":"control-panel",class:"control-panel theme--"+this.theme+" background--"+this.theme},(0,r.h)("div",{class:"control-panel__buttons--left"},(0,r.h)(this.PlayControl,null),(0,r.h)(this.ReplayControl,null),(0,r.h)(this.StopControl,null)),(0,r.h)("div",{class:"control-panel__buttons--center"},(0,r.h)(this.PlaybackSpeedControl,null)),(0,r.h)("div",{class:"control-panel__buttons--right"},this.hasTextTranslations&&(0,r.h)(this.TextTranslationDisplayControl,null),(0,r.h)(this.StyleControl,null),(0,r.h)(this.FullScreenControl,null)))}wheelHandler(e){if(this.el.shadowRoot.querySelector(".reading")&&(e.path[0].classList.contains("sentence__word")||e.path[0].classList.contains("sentence__container")||e.path[0].classList.contains("sentence"))&&this.autoScroll){let e=this.el.shadowRoot.querySelector(".reading");e&&(this.autoScroll=!this.inPageContentOverflow(e),this.showGuide=!this.autoScroll)}}urlTransform(e){return this.useAssetsFolder&&function(e){return!/^(https?:[/]|assets)[/]\b/.test(e)}(e)?"assets/"+e:e}buildSprite(e,t){return new R({src:[e],sprite:t,rate:this.playback_rate})}tagToQuery(e){return"#"+(e=(e=e.replace(".","\\.")).replace("#","\\#"))}returnWordClosestTo(e){let t=Object.keys(this.processed_alignment);t.pop();for(let n=1;n<t.length;n++)if(1e3*e>this.processed_alignment[t[n]][0]&&this.processed_alignment[t[n+1]]&&1e3*e<this.processed_alignment[t[n+1]][0])return this.el.shadowRoot.querySelector(this.tagToQuery(t[n]))}changePlayback(e){let t=e.currentTarget;this.playback_rate=parseInt(t.value)/100,this.audio_howl_sprites.sound.rate(this.playback_rate)}goBack(e){this.autoScroll=!1,this.play_id&&this.audio_howl_sprites.goBack(this.play_id,e),setTimeout((()=>this.autoScroll=!0),100)}goTo(e){void 0===this.play_id&&(this.play(),this.pause()),this.autoScroll=!1,e/=1e3,this.audio_howl_sprites.goTo(this.play_id,e),setTimeout((()=>this.autoScroll=!0),100)}goToSeekAtEl(e){let t=e.currentTarget.id,n=this.processed_alignment[t][0];return this.goTo(n),t}goToSeekFromProgress(e){let t=e.currentTarget.getBoundingClientRect(),n=t.left,r=t.width,o=(e.pageX-n)/r*this.duration*1e3;this.goTo(o)}pause(){this.playing=!1,this.audio_howl_sprites.pause()}play(){this.playing=!0,void 0!==this.play_id?this.play_id=this.audio_howl_sprites.play(this.play_id):this.play_id=this.audio_howl_sprites.play("all"),this.animateProgress()}playSprite(e){let t=this.goToSeekAtEl(e);this.playing||this.audio_howl_sprites.play(t)}stop(){this.playing=!1,this.audio_howl_sprites.stop(),this.el.shadowRoot.querySelectorAll(".reading").forEach((e=>e.classList.remove("reading"))),this.autoScroll||(this.autoScroll=!0,this.showGuide=!1)}toggleTextTranslation(){this.el.shadowRoot.querySelectorAll(".translation").forEach((e=>e.classList.toggle("invisible"))),this.el.shadowRoot.querySelectorAll(".sentence__translation").forEach((e=>e.classList.toggle("invisible")))}addHighlightingTo(e){this.el.shadowRoot.querySelectorAll(".reading").forEach((e=>e.classList.remove("reading"))),e.classList.add("reading")}animateProgressWithOverlay(){let e=this.el.shadowRoot.querySelector("#overlay__object"),t=e.contentDocument.querySelector("#progress-fill"),n=e.contentDocument.querySelector("#progress-trail"),r=e.contentDocument.querySelector("#progress-base");t.classList.add("stop-color--"+this.theme),r.classList.add("stop-color--"+this.theme),this.audio_howl_sprites.sounds.push(t),this.audio_howl_sprites.sounds.push(n),this.audio_howl_sprites.sound.once("end",(()=>{this.audio_howl_sprites.sounds.forEach((e=>{e.setAttribute("offset","0%")})),this.el.shadowRoot.querySelectorAll(".reading").forEach((e=>e.classList.remove("reading"))),this.playing=!1}),this.play_id)}animateProgressDefault(e,t){let n=document.createElement("div");n.className="progress theme--"+this.theme,n.id=e.toString(),n.dataset.sprite=t;let r=this.tagToQuery(t);this.el.shadowRoot.querySelector(r).appendChild(n),this.audio_howl_sprites.sounds.push(n),this.audio_howl_sprites.sound.once("end",(()=>{this.el.shadowRoot.querySelectorAll(".reading").forEach((e=>e.classList.remove("reading"))),this.playing=!1}),this.play_id)}animateProgress(e=this.play_id){this.svgOverlay?this.animateProgressWithOverlay():this.animateProgressDefault(e,"all")}changeFill(){let e=this.el.shadowRoot.querySelector(".sentence__word"),t=window.getComputedStyle(e).color,n=this.el.shadowRoot.querySelector("#overlay__object"),r=n.contentDocument.querySelector("#progress-fill"),o=n.contentDocument.querySelector("#progress-base");n.contentDocument.querySelector("#polygon").setAttribute("stroke",t),o.setAttribute("stop-color",t),r.setAttribute("stop-color",t)}changeTheme(){"light"===this.theme?this.theme="dark":this.theme="light"}static _getSentenceContainerOfWord(e){return e.parentElement.parentElement.parentElement}toggleFullscreen(){if(this.fullscreen){let e=this.el.ownerDocument;e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.msExitFullscreen&&e.msExitFullscreen(),this.el.shadowRoot.getElementById("read-along-container").classList.remove("read-along-container--fullscreen")}else{let e=this.el.shadowRoot.getElementById("read-along-container");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.el.shadowRoot.getElementById("read-along-container").classList.add("read-along-container--fullscreen")}this.fullscreen=!this.fullscreen}hideGuideAndScroll(){let e=this.el.shadowRoot.querySelector(".reading"),t=new IntersectionObserver((n=>{let[r]=n;r.isIntersecting&&(setTimeout((()=>{this.showGuide=!1,this.autoScroll=!0}),100),t.unobserve(e))}));t.observe(e),this.scrollTo(e)}inParagraphContentOverflow(e){let t=M._getSentenceContainerOfWord(e).getBoundingClientRect(),n=e.getBoundingClientRect(),r=n.right<t.left,o=n.right>t.right,i=new IntersectionObserver((t=>{let[n]=t;n.isIntersecting&&(setTimeout((()=>{this.showGuide=!1,this.autoScroll=!0}),100),i.unobserve(e))}));return i.observe(e),r||o}inPageContentOverflow(e){let t=this.el.shadowRoot.querySelector("#"+this.current_page).getBoundingClientRect(),n=e.getBoundingClientRect(),r=n.top+n.height>t.top+t.height,o=n.top+n.height<0,i=new IntersectionObserver((t=>{let[n]=t;n.isIntersecting&&(setTimeout((()=>{this.showGuide=!1,this.autoScroll=!0}),100),i.unobserve(e))}));return i.observe(e),o||r}inPage(e){let t=M._getSentenceContainerOfWord(e).getBoundingClientRect(),n=e.getBoundingClientRect(),r=n.top+n.height>t.top+t.height,o=n.top+n.height<0,i=new IntersectionObserver((t=>{let[n]=t;n.isIntersecting&&(setTimeout((()=>{this.showGuide=!1,this.autoScroll=!0}),100),i.unobserve(e))}));return i.observe(e),o||r}scrollToPage(e){let t=this.el.shadowRoot.querySelector(".pages__container"),n=this.el.shadowRoot.querySelector("#"+e);t.scrollBy({top:null!=this.pageScrolling.match("vertical")?n.offsetTop-t.scrollTop:0,left:null!=this.pageScrolling.match("vertical")?0:n.offsetLeft-t.scrollLeft,behavior:"smooth"}),n.scrollTo(0,0)}scrollByHeight(e){let t=M._getSentenceContainerOfWord(e),n=e.parentElement.getBoundingClientRect();t.scrollBy({top:t.getBoundingClientRect().height-n.height,left:0,behavior:"smooth"})}scrollByWidth(e){let t=M._getSentenceContainerOfWord(e),n=e.getBoundingClientRect();t.scrollTo({left:n.left-10,top:0,behavior:"smooth"})}scrollTo(e){e.scrollIntoView({behavior:"smooth"})}audioFailedToLoad(){this.isLoaded=!0,this.assetsStatus.AUDIO=2}audioLoaded(){this.isLoaded=!0,this.assetsStatus.AUDIO=1}componentDidUpdate(){this.svgOverlay&&this.changeFill()}componentWillLoad(){this.language.length<3&&(null!=this.language.match("fr")?this.language="fra":this.language="eng")}componentDidLoad(){this.processed_alignment=function(e){let t=F(e),n=(new DOMParser).parseFromString(t,"text/xml"),r=C("/i:smil/i:body/i:par/i:text/@src",n).map((e=>{let t=e.value.split("#");return t[t.length-1]})),o=C("/i:smil/i:body/i:par/i:audio/@clipBegin",n).map((e=>1e3*e.value)),i=C("/i:smil/i:body/i:par/i:audio/@clipEnd",n).map((e=>1e3*e.value)),s=[];for(var a=0;a<o.length;a++){let e=i[a]-o[a];s.push(e)}let l=(u=[o,s])[0].map((function(e,t){return u.map((function(e){return e[t]}))}));var u;let c={};for(a=0;a<r.length;a++)c[r[a]]=l[a];return c}(this.alignment),this.assetsStatus.SMIL=Object.keys(this.processed_alignment).length?1:2,this.audio_howl_sprites=new P.Howl({src:[this.audio],preload:!0,onloaderror:this.audioFailedToLoad.bind(this),onload:this.audioLoaded.bind(this)}),this.audio_howl_sprites.once("load",(()=>{var e,t;this.processed_alignment.all=[0,1e3*this.audio_howl_sprites.duration()],this.duration=this.audio_howl_sprites.duration(),this.audio_howl_sprites=this.buildSprite(this.audio,this.processed_alignment),this.reading$=this.audio_howl_sprites._reading$.pipe((n=>n.lift(new v(e,t)))).subscribe((e=>{if(this.playing){let t=this.tagToQuery(e),n=this.el.shadowRoot.querySelector(t);this.el.shadowRoot.querySelectorAll(".reading").forEach((e=>e.classList.remove("reading"))),n.classList.add("reading");let r=M._getSentenceContainerOfWord(n).parentElement.id;r!==this.current_page&&(void 0!==this.current_page&&this.scrollToPage(r),this.current_page=r),(n.getBoundingClientRect().left<0||0!==this.el.shadowRoot.querySelector("#"+r).getBoundingClientRect().left)&&this.scrollToPage(r),this.inPageContentOverflow(n)&&this.autoScroll&&(n.scrollIntoView(!1),this.scrollByHeight(n)),this.inParagraphContentOverflow(n)&&this.autoScroll&&(n.scrollIntoView(!1),this.scrollByWidth(n))}})),this.isLoaded=!0,this.assetsStatus.AUDIO=1})),this.parsed_text=function(e){let t=F(e),n=(new DOMParser).parseFromString(t,"text/xml");return C('.//div[@type="page"]',n).map((e=>{let t=e.id,r=C(`.//div[@id='${t}']/graphic/@url`,n),o={id:t,paragraphs:C(`.//div[@id='${t}']/p`,n)};return r.length>0&&(o.img=r[0].nodeValue),e.attributes&&(o.attributes=e.attributes),o}))}(this.text),this.assetsStatus.XML=this.parsed_text.length?1:2}returnTranslation(e,t){void 0===t&&(t=this.language);let n={speed:{eng:"Playback Speed",fra:"Vitesse de Lecture"},"re-align":{eng:"Re-align with audio",fra:"Réaligner avec l'audio"},"audio-error":{eng:"Error: The audio file could not be loaded",fra:"Erreur: le fichier audio n'a pas pu être chargé"},"text-error":{eng:"Error: The text file could not be loaded",fra:"Erreur: le fichier texte n'a pas pu être chargé"},"alignment-error":{eng:"Error: The alignment file could not be loaded",fra:"Erreur: le fichier alignement n'a pas pu être chargé"},loading:{eng:"Loading...",fra:"Chargement en cours"}};return n[e]?n[e][t]:e}render(){return(0,r.h)("div",{id:"read-along-container",class:"read-along-container"},(0,r.h)("h1",{class:"slot__header"},(0,r.h)("slot",{name:"read-along-header"})),(0,r.h)("h3",{class:"slot__subheader"},(0,r.h)("slot",{name:"read-along-subheader"})),this.assetsStatus.AUDIO&&(0,r.h)("p",{"data-cy":"audio-error",class:"alert status-"+this.assetsStatus.AUDIO+(1==this.assetsStatus.AUDIO?" fade":"")},(0,r.h)("span",{class:"material-icons-outlined"}," ",2==this.assetsStatus.AUDIO?"error":this.assetsStatus.AUDIO>0?"done":"pending_actions"),(0,r.h)("span",null,2==this.assetsStatus.AUDIO?this.returnTranslation("audio-error",this.language):this.assetsStatus.SMIL>0?"AUDIO":this.returnTranslation("loading",this.language))),this.assetsStatus.XML&&(0,r.h)("p",{"data-cy":"text-error",class:"alert status-"+this.assetsStatus.XML+(1==this.assetsStatus.XML?" fade":"")},(0,r.h)("span",{class:"material-icons-outlined"}," ",2==this.assetsStatus.XML?"error":this.assetsStatus.XML>0?"done":"pending_actions"),(0,r.h)("span",null,2==this.assetsStatus.XML?this.returnTranslation("text-error",this.language):this.assetsStatus.SMIL>0?"XML":this.returnTranslation("loading",this.language))),this.assetsStatus.SMIL&&(0,r.h)("p",{"data-cy":"alignment-error",class:"alert status-"+this.assetsStatus.SMIL+(1==this.assetsStatus.SMIL?" fade":"")},(0,r.h)("span",{class:"material-icons-outlined"}," ",2==this.assetsStatus.SMIL?"error":this.assetsStatus.SMIL>0?"done":"pending_actions"),(0,r.h)("span",null,2==this.assetsStatus.SMIL?this.returnTranslation("alignment-error",this.language):this.assetsStatus.SMIL>0?"SMIL":this.returnTranslation("loading",this.language))),(0,r.h)("div",{"data-cy":"text-container",class:"pages__container theme--"+this.theme+" "+this.pageScrolling},this.showGuide?(0,r.h)(this.Guide,null):null,1==this.assetsStatus.XML&&this.parsed_text.map((e=>(0,r.h)(this.Page,{pageData:e}))),0==this.isLoaded&&(0,r.h)("div",{class:"loader"})),1==this.assetsStatus.SMIL&&(0,r.h)("div",{onClick:e=>this.goToSeekFromProgress(e),id:"all","data-cy":"progress-bar",class:"overlay__container theme--"+this.theme+" background--"+this.theme},this.svgOverlay?(0,r.h)(this.Overlay,null):null),1==this.assetsStatus.AUDIO&&(0,r.h)(this.ControlPanel,null),this.cssUrl&&null!=this.cssUrl.match(".css")&&(0,r.h)("link",{href:this.cssUrl,rel:"stylesheet"}))}get el(){return(0,r.g)(this)}};M.style="@font-face{font-family:'Karla';font-style:normal;font-weight:400;src:local('Karla'), local('Karla-Regular'), url('assets/fonts/qkBbXvYC6trAT7RbLtyU5rZPoAU.woff2') format('woff2');unicode-range:U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF}@font-face{font-family:'Karla';font-style:normal;font-weight:400;src:local('Karla'), local('Karla-Regular'), url('assets/fonts/qkBbXvYC6trAT7RVLtyU5rZP.woff2') format('woff2');unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD}@font-face{font-family:'Lato';font-style:normal;font-weight:400;src:local('Lato Regular'), local('Lato-Regular'), url('assets/fonts/S6uyw4BMUTPHjxAwXiWtFCfQ7A.woff2') format('woff2');unicode-range:U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF}@font-face{font-family:'Lato';font-style:normal;font-weight:400;src:local('Lato Regular'), local('Lato-Regular'), url('assets/fonts/S6uyw4BMUTPHjx4wXiWtFCc.woff2') format('woff2');unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD}@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:url('assets/fonts/flUhRq6tzZclQEJ-Vdg-IuiaDsNcIhQ8tQ.woff2') format('woff2')}@font-face{font-family:'Material Icons Outlined';font-style:normal;font-weight:400;src:url('assets/fonts/gok-H7zzDkdnRel8-DQ6KAXJ69wP1tGnf4ZGhUcel5euIg.woff2') format('woff2')}.material-icons{font-family:'Material Icons';font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}.material-icons-outlined{font-family:'Material Icons Outlined';font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}.font-weight--100{font-weight:100}.font-weight--200{font-weight:200}.font-weight--300{font-weight:300}.font-weight--400{font-weight:400}.font-weight--500{font-weight:500}.font-weight--600{font-weight:600}.font-weight--700{font-weight:700}.font-weight--800{font-weight:800}.font-weight--900{font-weight:900}.shadowed{text-shadow:0.3px 0.2px black}.theme--light.sentence,.theme--light.page__col__image,.theme--light.page__container,.theme--light.scroll-guide__container{background-color:#fff}.theme--dark.sentence,.theme--dark.page__col__image,.theme--dark.page__container,.theme--dark.scroll-guide__container{background-color:#3c4369}.sentence__word,.sentence__text,.scroll-guide__text{line-height:1.5;border-radius:0.3125em;position:relative;padding:0.0625em;font-size:1em}.theme--light.ripple,.theme--light.reading,.theme--light.sentence__word,.theme--light.sentence__text,.theme--light.scroll-guide__text{color:#040508}.theme--dark.ripple,.theme--dark.reading,.theme--dark.sentence__word,.theme--dark.sentence__text,.theme--dark.scroll-guide__text{color:#fff}.theme--light.ripple:active,.theme--light.reading:active,.theme--light.sentence__word:hover{color:#fff;background:gray radial-gradient(circle, transparent 1%, gray 1%) center/15000%}.theme--dark.ripple:active,.theme--dark.reading:active,.theme--dark.sentence__word:hover{color:#fff;background:#a6a6a6 radial-gradient(circle, transparent 1%, #a6a6a6 1%) center/15000%}.theme--light.sentence__word.reading{color:#fff;background:#666666 radial-gradient(circle, transparent 1%, #666666 1%) center/15000%}.theme--dark.sentence__word.reading{color:#040508;background:#fff radial-gradient(circle, transparent 1%, #fff 1%) center/15000%}.theme--light.scroll-guide__container,.theme--light.overlay__container{border:0.046875em solid gray}.theme--dark.scroll-guide__container,.theme--dark.overlay__container{border:0.046875em solid #a6a6a6}.theme--light.page--multi,.theme--light.pages__container,.theme--light.control-panel{border-left:0.046875em solid gray}.theme--dark.page--multi,.theme--dark.pages__container,.theme--dark.control-panel{border-left:0.046875em solid #a6a6a6}.theme--light.page--multi,.theme--light.pages__container,.theme--light.control-panel{border-right:0.046875em solid gray}.theme--dark.page--multi,.theme--dark.pages__container,.theme--dark.control-panel{border-right:0.046875em solid #a6a6a6}.theme--light.pages__container{border-top:0.046875em solid gray}.theme--dark.pages__container{border-top:0.046875em solid #a6a6a6}.theme--light.control-panel{border-bottom:0.046875em solid gray}.theme--dark.control-panel{border-bottom:0.046875em solid #a6a6a6}.ripple:hover,.reading:hover,.sentence__word:hover{cursor:pointer}@viewport{width:device-width}button{border:0;cursor:pointer}html{background-color:#fff;box-sizing:border-box;height:100%}*:before,*:after{box-sizing:inherit}body{-webkit-font-smoothing:antialiased;color:#040508;font-family:\"Lato\", sans-serif;min-height:100%;overflow-x:hidden;overflow-y:hidden;text-rendering:optimizeLegibility}a{background:transparent;color:#c69;text-decoration:none;transition:color 0.2s;outline:none}a:active,a:focus{outline:none}img{height:90%;max-width:90%;object-fit:cover}h1,h2,h3,h4,h5,h6{font-family:\"Karla\", sans-serif;font-weight:normal}p,mat-chip,mat-tab-label,span,button,a{font-family:\"Lato\", sans-serif}.theme--light::-webkit-scrollbar{width:0.5em;height:0.5em}.theme--light::-webkit-scrollbar-track{background:#fff}.theme--light::-webkit-scrollbar-thumb{background:#040508;border-radius:0.3125em;height:0.625em;width:0.625em}.theme--dark::-webkit-scrollbar{width:0.5em;height:0.5em}.theme--dark::-webkit-scrollbar-track{background:#3c4369}.theme--dark::-webkit-scrollbar-thumb{background:#fff;border-radius:0.3125em;height:0.625em;width:0.625em}.bg-img{background-image:url(\"../assets/img/bg.jpg\");height:100vh;overflow:overlay;overflow-x:hidden;background-position:center;background-repeat:no-repeat;background-size:cover;min-height:100%}.shadow-box{box-shadow:0 0.3125rem 1rem 0 rgba(0, 0, 0, 0.24);padding:25px;background:rgba(255, 255, 255, 0.94);border-radius:5px}.font-xs{font-size:0.5em}.font-sm{font-size:0.75em}.font-md{font-size:1em}.font-lg{font-size:1.25em}.font-xl{font-size:1.5em}.font-xxl{font-size:2em}.faded{opacity:0.2;color:black}table{table-layout:fixed}.center{margin-left:auto;margin-right:auto;text-align:center}.container{max-width:80em}.background--light{background:#fff}.stop-color--light{fill:#fff}.color--light{color:#040508}.background--dark{background:#3c4369}.stop-color--dark{fill:#3c4369}.color--dark{color:#fff}.abs{position:absolute}.top-0{top:0}.left-0{left:0}.right-0{right:0}.top-5{top:0.3125em}.left-5{left:0.3125em}.right-5{right:0.3125em}.top-10{top:0.625em}.left-10{left:0.625em}.right-10{right:0.625em}.top-15{top:0.9375em}.left-15{left:0.9375em}.right-15{right:0.9375em}.top-20{top:1.25em}.left-20{left:1.25em}.right-20{right:1.25em}.top-25{top:1.5625em}.left-25{left:1.5625em}.right-25{right:1.5625em}.top-30{top:1.875em}.left-30{left:1.875em}.right-30{right:1.875em}.top-35{top:2.1875em}.left-35{left:2.1875em}.right-35{right:2.1875em}.top-40{top:2.5em}.left-40{left:2.5em}.right-40{right:2.5em}.top-45{top:2.8125em}.left-45{left:2.8125em}.right-45{right:2.8125em}.top-50{top:3.125em}.left-50{left:3.125em}.right-50{right:3.125em}.invisible{visibility:hidden !important}.control-panel{border-radius:0 0 0.3125em 0.3125em;position:relative;min-width:100%;display:inline-flex}.control-panel__buttons--left{width:25%;float:left;margin-top:0.3125em;padding:0.3125em}.control-panel__buttons--center{width:25%;text-align:center;margin:0 auto}.control-panel__buttons--right{width:25%;text-align:right;float:right;margin-top:0.3125em;margin-right:0.3125em}.control-panel__buttons__header{margin:0.3125em}.control-panel__control{border-radius:0.3125em;margin:0.5em auto}.control-panel__control:focus{outline:none}.settings{margin-left:0;margin-right:0;text-align:center}.settings__option__header{margin-bottom:0.5em}#waveform{background-size:contain;background-repeat:no-repeat;background-position:center center;width:100%;height:100%;position:absolute;top:0;left:0}.low{z-index:700}.overlay__container{width:100%;max-width:100%;height:3.125em;position:relative;z-index:8000}#overlay__object{z-index:700;max-height:100%;min-width:100%;fill:\"transparent\"}#overlay__object.theme--light{stroke:gray}#overlay__object.theme--dark{stroke:#a6a6a6}.scroll-guide__container{text-align:center;z-index:700;width:20%;position:fixed;left:50%;transform:translate(-50%, 0)}.scroll-guide__text{font-size:1.25em}.pages__container{overflow:auto;max-height:55vh;height:100%;max-width:100%;width:100%;position:relative;display:-webkit-inline-flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;border-radius:0.3125em 0.3125em 0 0}.page{overflow-y:hidden;overflow-x:auto;flex-grow:1;min-width:99.6%;width:100%;max-width:55em}.page__container{display:grid;grid-template-columns:[col-start] [col-end];grid-template-rows:[row-start] 5% [row-end] 95%;grid-template-areas:\"image page-no\" \"image text\";justify-items:stretch}.page__counter{grid-area:page-no;margin:0.625em 0 0 0.9375em;text-align:right;padding-right:0.9375em;max-height:5rem}.page__col__image{grid-area:image;float:left;max-height:100%;text-align:center;margin:5%;padding:0;border-radius:0 0 0 0;position:relative}.page__col__image img{height:100%;max-width:95%;object-fit:contain}.page__col__text{grid-area:text}.page.two-column-layout-page{grid-template-columns:40% auto}.page.one-column-layout-page{display:grid;grid-template-columns:auto;grid-template-rows:[row-start] 5% [row-end] 95%;grid-template-areas:\"page-no\" \"text\";justify-items:stretch}.page.one-column-layout-page .page__col__image{grid-area:text}.hide-page-counter .page__counter{display:none}.pages__container.vertical{flex-direction:column !important}.pages__container.vertical>.page{min-height:100%}.paragraph__container{overflow-y:auto;min-width:40%;padding-bottom:0.75em}.sentence{margin:0 1.5em;text-align:left;max-width:90%}.sentence__container{margin:3.75em 0.625em 3.75em 0.625em;scroll-behavior:smooth;max-width:100%;position:relative;overflow-y:auto;overflow-x:hidden}.sentence__container__buttons{position:absolute;top:0;right:0}.sentence__word{font-size:1.5em}.sentence__translation .sentence__text,.sentence__translation .sentence__word{color:#777;font-style:italic;font-size:95%}.paragraph.visually_aligned .sentence .sentence__text,.paragraph.visually_aligned .sentence .sentence__word{display:table-cell}.paragraph.visually_aligned .sentence .sentence__text:empty{display:none}.paragraph.visually_aligned{display:table}.paragraph.visually_aligned .sentence{display:table-row}.read-along-container{max-width:75em;margin:0 auto;max-height:98vh;height:98vh;overflow-Y:hidden;overflow-X:hidden;padding:0.3125em;position:relative}.read-along-container--fullscreen{max-width:80%;min-width:80%}.slot__header{margin-bottom:0.3125em}.slot__subheader{margin-top:0;margin-left:1em}.loader{border:16px solid #eee;border-radius:50%;border-right-color:#aa0;border-bottom-color:#a33;border-left-color:#111;width:10rem;height:10rem;-webkit-animation:spin 3s linear infinite;animation:spin 3s linear infinite;position:fixed;top:calc(50vh - 10rem);left:calc(50vw - 10rem);z-index:1000;box-shadow:0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.alert{position:relative;padding:1rem 1rem;margin-bottom:1rem;border:1px solid transparent;border-radius:0.25rem;transition-delay:2s;transition:visibility 5s height 5s}.alert.status-1{color:#0f5132;background-color:#d1e7dd;border-color:#badbcc}.alert.status-2{color:#842029;background-color:#f8d7da;border-color:#f5c2c7}.alert.fade{visibility:collapse;height:0 !important;overflow:hidden !important;line-height:0 !important;padding:0 !important;margin:0 !important;border:0 !important}.animate-transition,.ripple,.reading{transition:background 0.4s}.animate-transition:active,.ripple:active,.reading:active{transition:background 0s}.ripple,.reading{background-position:center;padding:0.0625em}.ripple:active,.reading:active{background-size:100%}.progress{position:absolute;top:0;left:0;height:100%;width:0}.progress.theme--light{background-color:rgba(128, 128, 128, 0.2)}.progress.theme--dark{background-color:rgba(166, 166, 166, 0.2)}"},318:(e,t,n)=>{var r={"./read-along.entry.js":[159,179]};function o(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((()=>n(o)))}o.keys=()=>Object.keys(r),o.id=318,e.exports=o}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.e=()=>Promise.resolve(),n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=n(437);(()=>{const t="file:///Users/pinea/Web-Component/dist/esm/read-along.js",n={};return n.resourcesUrl=new URL(".",t).href,(0,e.p)(n)})().then((t=>(0,e.b)([["read-along",[[1,"read-along",{text:[1025],alignment:[1025],audio:[1025],svgOverlay:[1,"svg-overlay"],theme:[1025],language:[1025],cssUrl:[1,"css-url"],useAssetsFolder:[4,"use-assets-folder"],pageScrolling:[1,"page-scrolling"],playing:[32],fullscreen:[32],autoScroll:[32],isLoaded:[32]},[[9,"wheel","wheelHandler"]]]]]],t)))})()})();
